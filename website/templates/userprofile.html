{% extends "main.html" %}


{% block content %}


{% comment %} ----------------------------------------------------------- {% endcomment %}
{% comment %} This page is the Profile Page {% endcomment %}
{% comment %} ----------------------------------------------------------- {% endcomment %}


{% include 'sidebar.html' %}

{% load static %}
<link rel="stylesheet" href=" {% static '/css/profile.css' %} ">
<link rel="stylesheet" href=" {% static '/css/about.css' %} ">

{% load static %}
{% comment %} <link rel="stylesheet" href="{% static '/css/dashboardstyle.css' %}"> {% endcomment %}
<link rel="stylesheet" href="{% static '/css/staffpagestyle.css' %}">

<meta name="description" content="List of Trucks">
<meta name="keywords" content="Truck List">
  
  <style data-tag="default-style-sheet">
    html {
      font-family: Inter;
    }
  
  
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap');
  
  
  </style>
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap"
    data-tag="font"
  />
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&amp;display=swap"
    data-tag="font"
  />
  <!--This is the head section-->
  <!-- <style> ... </style> -->
  </head>
  
  <style>
    .alert {
    width: 58%;
  }
  
  
  </style>



<body style="
--bs-primary: #008751;
--bs-primary-rgb: 0, 135, 81;
--bs-secondary: #1f1f1f;
--bs-secondary-rgb: 31, 31, 31;
--bs-success: #31f99d;
--bs-success-rgb: 49, 249, 157;
">
    

<!-- <h1> Dashboard</h1>
<div class="card">
    <div class="card-body">
        <h1>Name:{{user.username}}</h1>
        <h1>Adress:{{user.address}}</h1>
        <h1>Mobile Phone:{{user.MobilePhone}}</h1>
        <h1>Landline:{{user.Landline}}</h1>
        <h1>Number of houses:{{user.houses}}</h1>
        <h1>Rate:{{user.rate}}</h1>
        <h1>Payrate:{{user.payrate}}</h1>
        <h1>Balance:{{user.outstanding_balance}}</h1>
    </div>
</div>  -->

{% if messages %}
<div class="alert alert-danger mt-4" role="alert" style="width: 80%;" id="wrapper">
    <div class="messages">
        {% for message in messages %}
        {{ message }}
        {% endfor %}
    </div>
</div>
{% endif %}

<section class="dashboard-section">
  <div class="container dashboard-container">
    {% comment %} Row Dashboard {% endcomment %}
      <div class="row">
        <div class="col-10 dashboard-content">
          <h1 class="fw-bold">
            Welcome, {{user.username}}!
          </h1>               
          <h6 style="text-shadow: 2px 2px 3px #656565; margin-top: 40px;">
            This page displays your transactions, providing you details about past payments. 
            If you want to change something on your account details, please <a style="text-decoration: none; color: yellow;" href="/#Contact-Map" target="_blank">
              contact us</a> and we'll get it settled.
          </span>
          </h6>
        </div>
      </div>
    </div>
  </div>
</section>

<section>
  <div class="container">
    <div class="row">
      <div class="col card-col1 my-5 mx-2 text-white">
        <div class="credit-card1">
          <h6 style="margin-left: 20px;">
            Outstanding Balance:
          </h6>
          {% if user.outstanding_balance is none %}
          <div class="credit-card__number">{{user.outstanding_balance}}</div>
          {% else %}
          {% load humanize %}
          <div class="credit-card__number">₱ {{user.outstanding_balance|intcomma}}</div>
          {% endif%}
          <div class="credit-card__holder">Bosyo Garbage Collector</div>
        </div>
      </div>
      <div class="col card-col2 my-5 mx-2 text-white">
        <div class="credit-card2">
          <h6 class="text-white" style="margin-left: 20px;">
            Next Billing:
          </h6>
          {% if user.payrate is none %}
          <div class="credit-card__number">{{user.payrate}}</div>
          {% else %}
          {% load humanize %}
          <div class="credit-card__number">₱ {{user.payrate|intcomma}}</div>
          {% endif%}
          <div class="credit-card__holder">Bosyo Garbage Collector</div>
        </div>
      </div>
    </div>
  </div>
</section>

<section>
  <div class="container text-dark">
    {% comment %} Recent Transactions {% endcomment %}
    <div class="text-dark" style="border-radius: 20px; background-color: #fff; border: none;">
      <div class="mx-3 py-3 mb-5">
        <h6 class="fw-bold text-start mb-5 mt-2">Payment History</h6>
          <div class="table-responsive">
            <table class="table">
                <thead>
                  <tr class="text-dark" style="border: none;">
                    <th></th>
                    <th>Date</th>
                    {% comment %} <th>User</th> {% endcomment %}
                    <th>Amount</th>
                    <th>Transaction ID</th>
                  </tr>
                </thead>
                <tbody>
                  {% for payment in payments %}

                    {% if forloop.counter < 6  %}  

                    <tr class="text-dark">
                        <td><i class="bi bi-currency-exchange"></i></td>
                        <td>{{payment.Date_paid}}</td>
                        {% comment %} <td>{{payment.User_who_Paid}}</td> {% endcomment %}
                        {% load humanize %}
                        <td>₱ {{payment.amount|intcomma}}</td>
                        <td>{{payment.transaction_id}}</td>
                      </tr>

                      {% endif %}
                  {% endfor %}
                </tbody>
            </table>
        </div>
      </div>
    </div>
  </div>
</section>

</body> 

{% endblock content %}

