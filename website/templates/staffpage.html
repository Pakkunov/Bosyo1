{% extends "main.html" %}

{% block title %}Profile Page{% endblock title %}
{% block content %}

{% include 'sidebar.html' %}


{% load static %}

<link rel="stylesheet" href=" {% static '/css/dashboardstyle.css' %} ">

<style>

/* this makes all content move right to show side bar properly */
body {
  margin-left: 100px;
}

.card_user_list {
  background-color: rgb(18, 18, 18);
  width: 1300px;
  color: aliceblue;
  border-radius: 30px;
  padding: 30px;
}

td {
  text-align: left;
  padding: 10px;
  vertical-align: left;
  text-align: center;
  height: 50px;
  line-height: 45px;
}


thead {
  border-bottom-width: 2px;
  text-align: center;
}

.btnPayment {
  background-color: #161616;
  border-style: hidden;
  border-radius: 7px;
  width: 200px;
  height: 50px;
  margin-bottom: 50px;
  margin-left: 50px;
  padding: 10px;
  text-align: center;
}


</style>

<body 
style="
--bs-primary: #008751;
--bs-primary-rgb: 0, 135, 81;
--bs-secondary: #1f1f1f;
--bs-secondary-rgb: 31, 31, 31;
--bs-success: #31f99d;
--bs-success-rgb: 49, 249, 157;
">

<div class="container">
  <h1 class="fs-1 pt-5">Dashboard</h1>
  <div class="row">
        <div class="col-md-6" style="max-height: 400px;">
          <h5 class="fs-5 mt-5">Here, you can see the user list.</h5>
          <div class="card-body">
              <div class="table-responsive">
                  <table class="table table-striped">
                      <thead>
                        <tr class="text-dark" style="vertical-align: top;">
                          <th></th>
                          <th>Username</th>
                          <th>Name</th>
                          <!-- <th>E-mail</th> -->
                          <th>Role</th>
                          <!-- <th>Address</th> -->
                          <!-- <th>Mobile phone</th> -->
                          <!-- <th>Landline</th> -->
                          <!-- <th>No. of Houses</th> -->
                          <!-- <th>Payrate</th> -->
                          <!-- <th>Total Rate</th> -->
                          <th>Outstanding Bal.</th>
                        </tr>
                      </thead>
                      <tbody>
                        {% for user in accounts %}  
                        <tr>
                            <td class="text-truncate text-dark" style="max-width: 100px;"><i class="bi bi-file-earmark-person-fill"></i></td>
                            <td class="text-truncate text-dark fw-b" style="max-width: 100px;">{{user.username}}</td>
                            <td class="text-truncate text-dark" style="max-width: 100px;">{{user.name}}</td>
                            <!-- <td class="text-truncate text-dark" style="max-width: 100px;">{{user.email}}</td> -->
                            <td class="text-truncate text-dark" style="max-width: 100px;">User's Role</td>
                            <!-- <td class="text-truncate text-dark" style="max-width: 100px;">{{user.address}}</td> -->
                            <!-- <td class="text-truncate text-dark" style="max-width: 100px;">{{user.MobilePhone}}</td> -->
                            <!-- <td class="text-truncate" style="max-width: 100px;">{{user.Landline}}</td> -->
                            <!-- <td class="text-truncate text-dark" style="max-width: 100px;">{{user.houses}}</td> -->
                            <!-- <td class="text-truncate text-dark" style="max-width: 100px;">{{user.payrate}}</td> -->
                            <!-- <td class="text-truncate text-dark" style="max-width: 100px;">{{user.rate}}</td> -->
                            {% load humanize %}
                            <td class="text-truncate text-dark" style="max-width: 100px;">₱ {{user.outstanding_balance|intcomma}}</td>
                            
                        </tr>
                        {% endfor %} 
                    </tbody>
                  </table>
                </div>
            </div>
        </div>
        <div class="col-md-5">
          <div class="card text-light" style="border-radius: 20px; background-color: rgb(20, 20, 20); border: none;">
            <div class="card-body">
              <h6 class="fs-6 fw-bold mb-3">Recent transactions</h6>
                <div class="table-responsive">
                  <table class="table">
                      <thead>
                        <tr class="text-light" style="border: none;">
                          <th></th>
                          <th>Date</th>
                          <th>User</th>
                          <th>Amount</th>
                        </tr>
                      </thead>
                      <tbody>
                        {% for payment in payments %}  
                          <tr class="text-light">
                            <td><i class="bi bi-currency-exchange"></i></td>
                            <td>{{payment.Date_paid}}</td>
                            <td>{{payment.User_who_Paid}}</td>
                            {% load humanize %}
                            <td>₱ {{payment.amount|intcomma}}</td>
                          </tr>
                          {% endfor %} 
                      </tbody>
                  </table>
              </div>
            </div>
          </div>
        </div>
    </div>
</div>

{% include 'chart.html' %}

<section>
  <div class="container">
      <div class="col">
          <div class="row">
              <div class="col-xl-10 col-xxl-9 mb-5 mt-5">
                  <div class="card_user_list card">
                      <div class="card-header d-flex flex-wrap justify-content-center align-items-center justify-content-sm-between gap-3">
                        <h5 class="display-6 text-nowrap text-capitalize mb-0 mt-2 fw-bold">
                          Trucks and Drivers <i class="bi bi-person-lines-fill"></i>
                        </h5>
                          <div class="input-group input-group-sm w-auto"><input class="form-control form-control-sm" type="text"><button class="btn btn-outline-primary btn-sm" type="button">
                            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 16 16" class="bi bi-search mb-1">
                                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z">
                                </path>
                            </svg></button></div>
                      </div>
                      <div class="card-body">
                          <div class="table-responsive">
                              <table class="table text-light">
                                  <thead>
                                    <tr>
                                      <th>Truck no.</th>
                                      <th>Driver</th>
                                      <th>Helpers</th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                    {% for truck in trucks %}  
                                      <tr>
                                        <td>{{truck.Truck_number}}</td>
                                        <td>{{truck.Driver_Name}}</td>
                                        <td>{{truck.Helper}}</td>
                                        <td>
                                          {% comment %} <img src="{{Truck_Part.Receipt.url}}" alt="Receipt"> {% endcomment %}
                                        </td>
                                      </tr>
                                      {% endfor %} 
                                    </tbody>
                              </table>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>
</section>

<section>
  <div class="container px-5">
    <div class="row">
        <div class="col-md-3">
          <a href="/manualpayment">
            <button class="btnPayment btn-primary" type="button">
              Manual Payment <i class='bx bxs-bank'></i>
            </button>
          </a>
        </div>
        <div class="col-md-3">
          <a href="/TruckMaintenance">
            <button class="btnPayment btn-primary" type="button">
              Maintenance <i class='bx bxs-alarm-exclamation'></i>
            </button>
          </a>
        </div>
        <div class="col-md-3">
          <a href="">
            <button class="btnPayment btn-primary" type="button">
              Coming Soon... <i class='bx bxs-alarm-exclamation'></i>
            </button>
          </a>
        </div>
    </div>
  </div>
</section>
</body>

{% endblock content %}