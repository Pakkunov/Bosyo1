{% extends "main.html" %}

{% block title %}Profile Page{% endblock title %}
{% block content %}

{% comment %} ----------------------------------------------------------- {% endcomment %}
{% comment %} This page is the Dashboard {% endcomment %}
{% comment %} ----------------------------------------------------------- {% endcomment %}

{% include 'sidebar.html' %}

{% load static %}
{% comment %} <link rel="stylesheet" href="{% static '/css/dashboardstyle.css' %}"> {% endcomment %}
<link rel="stylesheet" href="{% static '/css/staffpagestyle.css' %}">

<meta name="description" content="List of Trucks">
<meta name="keywords" content="Truck List">
  
<style data-tag="default-style-sheet">
  html {
    font-family: Inter;
  }


  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap');


</style>
<link
  rel="stylesheet"
  href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap"
  data-tag="font"
/>
<link
  rel="stylesheet"
  href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&amp;display=swap"
  data-tag="font"
/>
<!--This is the head section-->
<!-- <style> ... </style> -->
</head>

<style>
  .alert {
  width: 58%;
}


</style>

<body 
style="
--bs-primary: #008751;
--bs-primary-rgb: 0, 135, 81;
--bs-secondary: #1f1f1f;
--bs-secondary-rgb: 31, 31, 31;
--bs-success: #31f99d;
--bs-success-rgb: 49, 249, 157;
">

<section class="dashboard-section">
  <div class="container dashboard-container">
    {% comment %} Row Dashboard {% endcomment %}
      <div class="row">
        <div class="col-10 dashboard-content">
          <h1 class="fw-bold">
            Welcome back, {{user.username}}!
          </h1>               
          <h6 style="text-shadow: 2px 2px 3px #656565; margin-top: 40px;">
            You can monitor your 
            account's history and ensure that all transactions were authorized and accurate.
          </h6>
        </div>
      </div>
    </div>
  </div>
</section>

<div class="container">
<div class="row">
    <div class="col-md-9" style="">
    <section>
      <div class="container position-relative">
        {% comment %} Buttons {% endcomment %}
        <div class="row position-absolute" style="top: -4rem;">
          <div class="d-flex justify-content-between col-4">
            <a href="/manualpayment">
              <button class="btnPayment btn-primary me-3" type="button">
                <i class='bx bxs-bank' style="font-size: 30px;"></i><br> Manual Payment
              </button>
            </a>
            <form method="POST" action="{% url 'increase_balance' %}">
              {% csrf_token %}
              <button type="submit" class="btnPayment btn-primary ms-2">
                <i class='bx bx-plus-medical' style="font-size: 30px;"></i><br> Increase Balance
              </button>
            </form>
          </div>      
        </div>
        {% comment %} 
        <div class="img-trucklist position-relative">
          <img
          src="\static\images\dashboard-1.png"
          class="py-1 d-none d-lg-block mx-5 position-absolute"
          style="width: 300px; right: 0; top: -220px">
        </div> 
        {% endcomment %}
    
        {% comment %} Dashboard Content (Names) {% endcomment %}
        <div class="row pt-5">
          <div class="col mt-3">
            <div class="card-body" style="background-color: #fff; border-radius: 10px;">
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                          <tr class="text-dark" style="vertical-align: top;">
                            <th></th>
                            <th>Username</th>
                            <!-- <th>E-mail</th> -->
                            <!-- <th>Address</th> -->
                            <!-- <th>Mobile phone</th> -->
                            <!-- <th>Landline</th> -->
                            <!-- <th>No. of Houses</th> -->
                            <!-- <th>Payrate</th> -->
                            <!-- <th>Total Rate</th> -->
                            <th>Outstanding Bal.</th>
                          </tr>
                        </thead>
                        <tbody>
                          {% for user in accounts %}  
                          <tr class="useracc">
                              <td class="text-truncate text-dark" style="max-width: 100px;"><i class="bi bi-file-earmark-person-fill"></i></td>
                              <td class="text-truncate text-dark fw-b" style="max-width: 100px;">{{user.username}}</td>
                              <!-- <td class="text-truncate text-dark" style="max-width: 100px;">{{user.email}}</td> -->
                              <!-- <td class="text-truncate text-dark" style="max-width: 100px;">{{user.address}}</td> -->
                              <!-- <td class="text-truncate text-dark" style="max-width: 100px;">{{user.MobilePhone}}</td> -->
                              <!-- <td class="text-truncate" style="max-width: 100px;">{{user.Landline}}</td> -->
                              <!-- <td class="text-truncate text-dark" style="max-width: 100px;">{{user.houses}}</td> -->
                              <!-- <td class="text-truncate text-dark" style="max-width: 100px;">{{user.payrate}}</td> -->
                              <!-- <td class="text-truncate text-dark" style="max-width: 100px;">{{user.rate}}</td> -->
                              {% load humanize %}
                          {% if user.outstanding_balance is none %}
                              <td class="text-truncate text-dark" style="max-width: 100px;">₱ 0</td>
                          {% else %}
                              <td class="text-truncate text-dark" style="max-width: 100px;">₱ {{user.outstanding_balance|intcomma}}</td>
                          {% endif %}
                        </tr>
                          {% endfor %} 
                      </tbody>
                    </table>
                  </div>
              </div>
          </div>
      </div>
    </section>
    
    <section>
      <div class="container my-5">
        {% comment %} Recent Transactions {% endcomment %}
        <div class="col">
          <div class="text-dark" style="border-radius: 10px; background-color: #fff; border: none;">
            <div class="py-3 mb-5">
              <h6 class="fw-bold ms-3">Recent transactions</h6>
                <div class="table-responsive">
                  <table class="table">
                      <thead>
                        <tr class="text-dark" style="border: none;">
                          <th></th>
                          <th>Date</th>
                          <th>User</th>
                          <th>Amount</th>
                          <th>Transaction ID</th>
                        </tr>
                      </thead>
                      <tbody>
                        {% for payment in payments %}
                          {% if forloop.counter < 11  %}  
                            <tr class="text-dark">
                              <td><i class="bi bi-currency-exchange"></i></td>
                              <td>{{payment.Date_paid}}</td>
                              <td>{{payment.User_who_Paid}}</td>
                              {% load humanize %}
                              <td>₱ {{payment.amount|intcomma}}</td>
                              <td>{{payment.transaction_id}}</td>
                            </tr>
                            {% endif %}
                        {% endfor %}
                      </tbody>
                  </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <div class="col-md-3">
    <section class="category-section w-100 mt-5">
      <div class="container">
        <div class="row">
          <div class="category-heading">
            <h1 class="fw-bold">
              Categories
            </h1>
          </div>
        </div>
        <div class="row mt-3">
          <div class="col mb-4">
            <a href="/qrlogin">
              <button class="btnCategory btn-primary col-cat1 fw-bold" type="button">
                Employee Attendance
              </button>
            </a>
          </div>
          <div class="col mb-4">
            <a href="/TruckMaintenance">
              <button class="btnCategory btn-primary col-cat2 fw-bold" type="button">
                Truck Maintenance
              </button>
            </a>
          </div>
          <div class="col mb-4">
            <a href="/qr-code">
              <button class="btnCategory btn-primary col-cat3 fw-bold" type="button">
                QR Code Generator
              </button>
            </a>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>
</div>








</body>

{% endblock content %}
